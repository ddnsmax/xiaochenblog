---
title: 去水印源码
author: Hexo博客
tags:
  - 源码
categories:
  - 源码
date: 2025-08-28 05:49:04
---
后台支持修改公告使用方式，网站支持的应用图标等，应用图标支持添加修改和一键删除

更新：
1：添加下载图标，pc 端图片和视频进行排序更美观
2：更新首页更美观，后台点击修改不再刷新浏览器
访问 install.php 进行安装

你网站的后台地址是：域名 +/admin.php

把下面代码放到：index.php 最后面

```
<script>
let cleaning = false;
let justCleaned = false;

document.getElementById("parseButton").addEventListener("click", function (event) {
    const input = document.getElementById("urlInput");
    const text = input.value;

    // 如果刚清洗过，放行执行默认行为（表单提交 / onclick）
    if (justCleaned) {
        justCleaned = false;
        return;
    }

    // 拦截第一次点击，先清洗
    event.preventDefault();

    // 通用 URL 匹配
    const pattern = /(https?:\/\/[^\s\u4e00-\u9fa5，,。；、”‘“”…]+)/i;
    const match = text.match(pattern);

    if (match && match[1]) {
        input.value = match[1].trim();

        // 设置标志，避免递归死循环
        cleaning = true;
        justCleaned = true;

        // 模拟再次点击按钮（不会触发清洗逻辑）
        setTimeout(() => {
            document.getElementById("parseButton").click();
        }, 50);
    } else {
        alert("未检测到有效的链接，请粘贴包含网址的内容。");
    }
});
</script>
```

带计数版修改：数据库

* 登录宝塔
* 点击左侧【数据库】
* 找到你的网站数据库，点击【管理】（会打开 phpMyAdmin）
* 同样点击【SQL】输入框粘贴那段代码并运行即可

```
CREATE TABLE stats (
    type ENUM('visit', 'parse') PRIMARY KEY,
    count INT DEFAULT 0
);

INSERT INTO stats (type, count) VALUES ('visit', 0), ('parse', 0);
```
